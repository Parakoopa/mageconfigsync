#!/usr/bin/env php
<?php
$autoload_files = array(
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../../vendor/autoload.php'
);

foreach ($autoload_files as $autoload_file) {
    if (file_exists($autoload_file)) {
        require_once $autoload_file;
        break;
    } 
}

if (!class_exists(Composer\Autoload\ClassLoader::class)) {
    trigger_error("Dependencies have not been installed.  Have you run 'composer install'?", E_USER_ERROR);
}

$containerBuilder = new \DI\ContainerBuilder();

$containerBuilder->addDefinitions([
    \Psr\Log\LoggerInterface::class => new \Monolog\Logger('mageconfigsync')
]);

$container = $containerBuilder->build();

$application = new MageConfigSync\Application($container);
$application->run();
